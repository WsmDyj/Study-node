(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e44f958c"],{1364:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"el-fade-in"}},[t.islogin?a("div",{staticClass:"login"},[a("div",{staticClass:"auth-form"},[a("i",{staticClass:"close-btn iconfont",attrs:{title:"关闭"},on:{click:t.closeLogin}},[t._v("")]),a("div",{staticClass:"panel"},[a("formBox",{attrs:{type:t.activeIndex},on:{onSubmit:t.handleLogin}}),a("div",{staticClass:"oauth-box"},[a("div",{staticClass:"oauth-title"},[t._v("第三方账号登录：")]),a("div",{staticClass:"oauth-content"},[a("div",{staticClass:"oauth-bg",on:{click:t.hadnleOauth}},[a("svg",{staticClass:"icon github-icon",attrs:{width:"32.8",height:"32.8",viewBox:"0 0 21 18"}},[a("path",{attrs:{"data-v-335a593e":"",fill:"#161614","fill-rule":"nonzero",d:"M1.857 9.203c0 3.624 2.456 6.698 5.862 7.782.429.076.585-.177.585-.395 0-.194-.007-.71-.012-1.395-2.384.496-2.887-1.1-2.887-1.1-.39-.947-.952-1.2-.952-1.2-.778-.508.06-.498.06-.498.86.058 1.312.846 1.312.846.765 1.253 2.007.89 2.495.68.078-.529.3-.89.544-1.095-1.903-.207-3.904-.911-3.904-4.054 0-.896.334-1.628.882-2.201-.088-.208-.383-1.042.084-2.171 0 0 .72-.22 2.357.84a8.557 8.557 0 0 1 2.146-.276 8.566 8.566 0 0 1 2.146.277c1.636-1.062 2.354-.841 2.354-.841.468 1.129.174 1.963.086 2.17.55.574.881 1.306.881 2.202 0 3.15-2.004 3.844-3.913 4.047.307.253.581.754.581 1.52 0 1.096-.01 1.98-.01 2.25 0 .219.154.474.589.394C16.546 15.898 19 12.825 19 9.203 19 4.673 15.162 1 10.428 1c-4.733 0-8.57 3.672-8.57 8.203z"}})])])])]),a("div",{staticClass:"agreement-box"},[t._v(" 注册登录即表示同意 "),a("span",{staticClass:"agreement"},[t._v("用户协议")]),t._v("、 "),a("span",{staticClass:"agreement"},[t._v("隐私政策 ")])])],1)])]):t._e()])},s=[],i=(a("96cf"),a("89ba")),r=a("9f12"),o=a("53fe"),c=a("8b83"),l=a("c65a"),u=a("c03e"),v=a("9ab4"),m=a("60a3"),f=a("9dba"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form"},["login"===t.type?a("div",{staticClass:"panfish"},[a("img",{staticStyle:{width:"120px",height:"95px"},attrs:{src:"https://b-gold-cdn.xitu.io/v3/static/img/normal.0447fe9.png"}})]):t._e(),a("div",{staticClass:"form-title"},[t._v(t._s("login"==t.type?"登录":"注册"))]),a("el-form",{ref:"Form",staticClass:"form-content",attrs:{rules:t.rules,autocomplete:"on",model:t.formData}},["register"===t.type?a("el-form-item",{attrs:{prop:"nickname"}},[a("el-input",{attrs:{type:"text",autocomplete:"login"===t.type?"on":"new-password",placeholder:"请输入用户名"},model:{value:t.formData.nickname,callback:function(e){t.$set(t.formData,"nickname",e)},expression:"formData.nickname"}})],1):t._e(),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入手机号"},model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}})],1),"register"===t.type&&!0===t.showCode?a("el-form-item",{attrs:{prop:"code"}},[a("el-input",{attrs:{type:"text",placeholder:"手机验证码"},model:{value:t.formData.code,callback:function(e){t.$set(t.formData,"code",e)},expression:"formData.code"}},[a("template",{slot:"append"},[t.visible?a("div",{on:{click:t.getCode}},[t._v("获取验证码")]):a("div",{staticClass:"reset"},[a("span",{staticClass:"reset-time"},[t._v(t._s(t.time))]),t._v(" s后重发")])])],2)],1):t._e(),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"login"===t.type?"on":"new-password",placeholder:"请输入密码(不少于3位)","show-password":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),a("el-button",{staticClass:"sumbit-btn",attrs:{loading:t.show,type:t.show?"info":"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v(t._s("login"===t.type?"登录":"立即注册"))])],1)],1)},p=[],h=a("ea9b"),b=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.validateUsername=function(e,a,n){if(a.length<1)n(new Error("请输入手机号"));else{var s=/^1[3|4|5|7|8][0-9]{9}$/;s.test(t.formData.username)?n():n(new Error("请输入正确的手机号码"))}},t.visible=!0,t.show=!1,t.time=30,t.formData={username:"",password:"",nickname:"",code:""},t.rules={nickname:[{required:!0,message:"请输入用户名",trigger:"blur"}],username:[{validator:t.validateUsername,trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,message:"密码不少于3位数",trigger:"blur"}]},t}return Object(u["a"])(e,t),Object(o["a"])(e,[{key:"handleLogin",value:function(){var t=this;this.$refs.Form.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}t.show=!0,t.$emit("onSubmit",t.formData),e.next=6;break;case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"monitor",value:function(){}},{key:"getCode",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["f"])({username:this.formData.username});case 2:this.visible=!1,e=setInterval((function(){a.time>1?a.time=a.time-1:(a.time=30,a.visible=!0,clearInterval(e))}),1e3);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"showCode",get:function(){var t=/^1[3|4|5|7|8][0-9]{9}$/;return!!t.test(this.formData.username)}}]),e}(m["d"]);v["a"]([Object(m["c"])()],b.prototype,"type",void 0),b=v["a"]([m["a"]],b);var g=b,k=g,y=(a("e0d2"),a("2877")),C=Object(y["a"])(k,d,p,!1,null,"cd391300",null),w=C.exports,x=function(t){function e(){return Object(r["a"])(this,e),Object(c["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(o["a"])(e,[{key:"stopMove",value:function(){var t=function(t){t.preventDefault()};document.body.style.overflow="hidden",document.addEventListener("touchmove",t,!1)}},{key:"removeStop",value:function(){var t=function(t){t.preventDefault()};document.body.style.overflow="",document.removeEventListener("touchmove",t,!1)}},{key:"hadnleOauth",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.open("/oauth","","height=600, width=700"),f["a"].handleIslogin(!1);case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"closeLogin",value:function(){f["a"].handleIslogin(!1)}},{key:"handleLogin",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("login"!=this.activeIndex){t.next=8;break}return t.next=3,f["a"].Login({username:e.username,password:e.password});case 3:return t.sent,t.next=6,f["a"].GetUserInfo();case 6:t.next=15;break;case 8:return t.next=10,f["a"].Register(e);case 10:if(a=t.sent,-1==a.errno){t.next=15;break}return this.$notify({title:"注册成功",message:"欢迎来到起点",type:"success"}),t.next=15,f["a"].GetUserInfo();case 15:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"islogin",get:function(){return f["a"].islogin?this.stopMove():this.removeStop(),f["a"].islogin}}]),e}(m["d"]);v["a"]([Object(m["c"])()],x.prototype,"activeIndex",void 0),x=v["a"]([Object(m["a"])({name:"login",components:{formBox:w}})],x);var _=x,O=_,j=(a("e7f4"),Object(y["a"])(O,n,s,!1,null,"2e2f659f",null));e["a"]=j.exports},1957:function(t,e,a){},"6c30":function(t,e,a){},"8c1e":function(t,e,a){},b046:function(t,e,a){"use strict";var n=a("6c30"),s=a.n(n);s.a},c48a:function(t,e,a){"use strict";var n=a("1957"),s=a.n(n);s.a},d2fb:function(t,e,a){},e0d2:function(t,e,a){"use strict";var n=a("d2fb"),s=a.n(n);s.a},e142:function(t,e,a){"use strict";var n=a("f83b"),s=a.n(n);s.a},e725:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.visible?"header":"visible header"},[a("div",{staticClass:"navigation"},[a("div",{staticClass:"logo"}),a("div",{staticClass:"content"},[a("Nav"),a("div",{staticClass:"nav-list"},[a("div",{staticClass:"search"},[a("el-input",{attrs:{size:"small",placeholder:"搜索文章或用户"},on:{focus:function(e){t.inputIcon=!0},blur:function(e){t.inputIcon=!1}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("router-link",{staticClass:"search-icon",style:{color:t.inputIcon?"#007fff":"#71777c"},attrs:{target:"_blank",to:{path:"/search",query:{keyword:t.keyword}}}},[a("i",{staticClass:"el-icon-search"})])],1),t.visivle?a("div",{staticClass:"nav-list"},[a("div",{staticClass:"nav-item header-button"},[a("router-link",{attrs:{to:"/markdown"}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("写文章")])],1)],1),a("div",{staticClass:"nav-item notice"},[a("el-badge",{staticClass:"item",attrs:{type:"primary"}},[a("i",{staticClass:"iconfont notice-icon"},[t._v("")])])],1),a("el-popover",{staticClass:"nav-item auth",attrs:{trigger:"click",width:"150"}},[a("Dropdown"),a("el-avatar",{attrs:{slot:"reference",size:"medium",src:t.avatar},slot:"reference"})],1)],1):a("div",{staticClass:"nav-list"},[a("div",{staticClass:"nav-item submit",on:{click:function(e){return t.submit("login")}}},[a("i",{staticClass:"el-icon-edit"}),a("span",[t._v("写文章")])]),a("div",{staticClass:"nav-item auth"},[a("span",{staticClass:"login",on:{click:function(e){return t.submit("login")}}},[t._v("登录")]),a("span",{staticClass:"register",on:{click:function(e){return t.submit("register")}}},[t._v("注册")])])])])],1)]),a("login",{attrs:{activeIndex:t.activeIndex}})],1)},s=[],i=a("9f12"),r=a("53fe"),o=a("8b83"),c=a("c65a"),l=a("c03e"),u=a("9ab4"),v=a("60a3"),m=a("1364"),f=a("9dba"),d=a("ec7f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav-content"},t._l(t.navs,(function(e,n){return a("li",{key:n,staticClass:"nav-item"},[a("router-link",{attrs:{"active-class":"active",to:e.path}},[t._v(" "+t._s(e.name)+" ")])],1)})),0)},h=[],b=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(o["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.navs=[{id:0,name:"文章",path:"/"},{id:1,name:"问答",path:"/questions"},{id:3,name:"分享",path:"/share"}],t}return Object(l["a"])(e,t),e}(v["d"]);b=u["a"]([v["a"]],b);var g=b,k=g,y=(a("e142"),a("2877")),C=Object(y["a"])(k,p,h,!1,null,"1e0b201d",null),w=C.exports,x=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(o["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.keyword="",t.inputIcon=!1,t.activeIndex="",t}return Object(l["a"])(e,t),Object(r["a"])(e,[{key:"submit",value:function(t){this.activeIndex=t,f["a"].handleIslogin(!0)}},{key:"created",value:function(){this.keyword=this.$route.query.keyword||""}},{key:"avatar",get:function(){return f["a"].avatar}},{key:"visivle",get:function(){return!!f["a"].token}}]),e}(v["d"]);u["a"]([Object(v["c"])({default:!0})],x.prototype,"visible",void 0),x=u["a"]([Object(v["a"])({components:{Login:m["a"],Dropdown:d["a"],Nav:w}})],x);var _=x,O=_,j=(a("c48a"),Object(y["a"])(O,n,s,!1,null,"65629105",null));e["a"]=j.exports},e7f4:function(t,e,a){"use strict";var n=a("8c1e"),s=a.n(n);s.a},ec7f:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-menu"},[a("div",{staticClass:"nav-menu-group"},[a("router-link",{staticClass:"nav-menu-item",attrs:{target:"_blank",to:"/markdown"}},[a("i",{staticClass:"el-icon-edit item-icon"}),a("span",{staticClass:"item-text"},[t._v("写文章")])]),t._m(0)],1),a("div",{staticClass:"nav-menu-group"},[a("router-link",{staticClass:"nav-menu-item",attrs:{target:"_blank",to:{path:"/author",query:{activeIndex:"1",author:t.nickname}}}},[a("span",{staticClass:"el-icon-user-solid"}),a("span",{staticClass:"item-text"},[t._v("我的主页")])]),a("router-link",{staticClass:"nav-menu-item",attrs:{target:"_blank",to:{path:"/author",query:{activeIndex:"2",author:t.nickname}}}},[a("i",{staticClass:"iconfont item-icon"},[t._v("")]),a("span",{staticClass:"item-text"},[t._v("我赞过的")])]),a("router-link",{staticClass:"nav-menu-item",attrs:{tag:"div",to:"/settings"}},[a("span",{staticClass:"el-icon-s-tools"}),a("span",{staticClass:"item-text"},[t._v("设置")])])],1),a("div",{staticClass:"nav-menu-group"},[a("div",{staticClass:"nav-menu-item",on:{click:t.loginOut}},[a("i",{staticClass:"iconfont item-icon"},[t._v("")]),a("span",{staticClass:"item-text"},[t._v("登出")])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-menu-item"},[a("i",{staticClass:"el-icon-s-goods item-icon"}),a("span",{staticClass:"item-text"},[t._v("草稿")])])}],i=a("9f12"),r=a("53fe"),o=a("8b83"),c=a("c65a"),l=a("c03e"),u=a("60a3"),v=a("5c96"),m=a("9dba"),f=function(t){function e(){return Object(i["a"])(this,e),Object(o["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),Object(r["a"])(e,[{key:"loginOut",value:function(){v["MessageBox"].confirm("确定登出吗？每一片贫瘠的土地都需要坚定的挖掘者","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){m["a"].ResetToken(),Object(v["Message"])({type:"success",message:"退出登录成功!"})})).catch((function(){Object(v["Message"])({type:"info",message:"已取消退出登录"})}))}},{key:"nickname",get:function(){return m["a"].nickname}}]),e}(u["d"]),d=f,p=(a("b046"),a("2877")),h=Object(p["a"])(d,n,s,!1,null,"2f5ab271",null);e["a"]=h.exports},f83b:function(t,e,a){}}]);